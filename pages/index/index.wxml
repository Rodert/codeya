<banner wx:if="{{showBanner}}" text="{{bannerText}}" duration="0" bindclose="onBannerClose"></banner>

<view class="page {{showBanner ? 'has-banner' : ''}}">
  <!-- Categories List -->
  <view class="categories-list">
    <view class="category-item" wx:for="{{categories}}" wx:key="id">
      <view class="category-header" bindtap="goToCategory" data-key="{{item.key}}">
        <image class="category-icon" src="{{item.icon}}" mode="aspectFit"/>
        <text class="category-name">{{item.name}}</text>
        <text class="question-count">{{item.questionCount}}é¢˜</text>
        <text class="expand-icon">></text>
      </view>
    </view>
  </view>

  <!-- é¸­é¸­å†’é™© - éšæœºåˆ·é¢˜åŠŸèƒ½ -->
  <view class="duck-adventure">
    <view class="adventure-title">
      <image class="duck-icon" src="{{currentDuckSkinIcon}}" mode="aspectFit"/>
      <text>é¸­é¸­å†’é™©</text>
      <view class="duck-level">Lv.{{duckLevel}}</view>
    </view>
    <view class="adventure-description">
      æ¯æ¬¡ç‚¹å‡»ï¼Œé¸­é¸­ä¼šå¸¦ä½ æ¢ç´¢ä¸€ä¸ªéšæœºçŸ¥è¯†ç‚¹
    </view>
    <view class="growth-bar-container">
      <view class="growth-bar">
        <view class="growth-progress" style="width: {{(duckGrowth / (duckLevel * 10)) * 100}}%"></view>
      </view>
      <text class="growth-text">æˆé•¿å€¼: {{duckGrowth}}/{{duckLevel * 10}}</text>
    </view>
    <view class="adventure-buttons">
      <button class="adventure-button" bindtap="startRandomQuestion">
        <text class="adventure-button-text">å¼€å§‹å†’é™©</text>
        <text class="adventure-emoji">ğŸš€</text>
      </button>
      <button class="achievement-button" bindtap="showAchievements">
        <text class="achievement-emoji">ğŸ†</text>
      </button>
      <button class="skin-button" bindtap="showSkinSelector">
        <text class="skin-emoji">ğŸ‘”</text>
      </button>
      <button class="ad-button" bindtap="showAdRewardOptions">
        <text class="ad-emoji">ğŸ</text>
      </button>
    </view>
    
    <!-- é«˜çº§é¢˜ç›®è§£é”çŠ¶æ€ -->
    <view wx:if="{{premiumUnlocked}}" class="premium-status">
      <text class="premium-text">ğŸŒŸ é«˜çº§é¢˜ç›®å·²è§£é”</text>
    </view>
  </view>

  <!-- Recent Questions -->
  <view class="recent-section">
    <view class="section-title">æœ€è¿‘æ›´æ–°</view>
    <view class="recent-list">
      <view class="recent-item" 
            wx:for="{{recentQuestions}}" 
            wx:key="id"
            bindtap="goToDetail"
            data-category-key="{{item.categoryKey}}"
            data-question-id="{{item.id}}">
        <text class="recent-title">{{item.title}}</text>
        <view class="recent-meta">
          <text class="difficulty difficulty-{{item.difficulty === 'ç®€å•' ? 'easy' : item.difficulty === 'ä¸­ç­‰' ? 'medium' : 'hard'}}">
            {{item.difficulty}}
          </text>
          <text class="view-count">{{item.viewCount}}æ¬¡å­¦ä¹ </text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¹¿å‘Šå¥–åŠ±é€‰é¡¹å¼¹çª— -->
  <view class="ad-options-popup" wx:if="{{showAdOptions}}">
    <view class="ad-options-container">
      <view class="ad-options-header">
        <text class="ad-options-title">é€‰æ‹©å¹¿å‘Šå¥–åŠ±</text>
        <view class="ad-options-close" bindtap="closeAdOptions">Ã—</view>
      </view>
      
      <view class="ad-options-content">
        <view class="ad-option-item" wx:for="{{adRewardOptions}}" wx:key="id" bindtap="selectAdReward" data-id="{{item.id}}">
          <view class="ad-option-icon">{{item.icon}}</view>
          <view class="ad-option-info">
            <view class="ad-option-name">{{item.name}}</view>
            <view class="ad-option-desc">{{item.desc}}</view>
          </view>
        </view>
      </view>
      
      <view class="ad-options-footer">
        <text class="ad-options-note">å®Œæ•´è§‚çœ‹å¹¿å‘Šåè·å¾—å¥–åŠ±</text>
      </view>
    </view>
  </view>

  <!-- å¦‚æœæœ‰è§£é”çš„é«˜çº§é¢˜ç›®ï¼Œæ˜¾ç¤ºåœ¨é¦–é¡µ -->
  <view class="premium-questions" wx:if="{{premiumUnlocked && premiumQuestions.length > 0}}">
    <view class="section-header">
      <text class="section-title">â­ ç²¾é€‰é¢˜ç›®</text>
      <text class="section-subtitle">é€šè¿‡å¹¿å‘Šè§£é”çš„é«˜è´¨é‡é¢˜ç›®</text>
    </view>
    
    <view class="premium-list">
      <view class="premium-item" wx:for="{{premiumQuestions}}" wx:key="id" bindtap="navigateToQuestion" data-id="{{item.id}}">
        <view class="premium-item-content">
          <view class="premium-item-title">{{item.title}}</view>
          <view class="premium-item-meta">
            <text class="premium-item-category">{{item.category}}</text>
            <text class="premium-item-difficulty">éš¾åº¦: {{item.difficulty}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
